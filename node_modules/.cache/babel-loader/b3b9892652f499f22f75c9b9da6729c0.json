{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/romai/Documents/Cours/IHM/Projet_M2/InstaSound/InstaSound/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/romai/Documents/Cours/IHM/Projet_M2/InstaSound/InstaSound/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/romai/Documents/Cours/IHM/Projet_M2/InstaSound/InstaSound/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import React,{useState,useEffect}from'react';import Item from\"./Item\";import firebase from'firebase';import{useDocument}from\"react-firebase-hooks/firestore\";import{IonList,IonItem,IonLabel,IonText,IonItemSliding,IonItemOption,IonItemOptions,IonIcon,IonButton,IonInput}from'@ionic/react';export default function AddItem(_ref){var initialValue=_ref.initialValue,clear=_ref.clear;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),item=_useState2[0],setItem=_useState2[1];var _useDocument=useDocument(firebase.firestore().doc(\"items\"+initialValue),{snapshotListenOptions:{includeMetadataChanges:true}}),_useDocument2=_slicedToArray(_useDocument,3),value=_useDocument2[0],loading=_useDocument2[1],error=_useDocument2[2];useEffect(function(){!loading&&initialValue&&value.exists&&setItem(value.data().name);},[loading,initialValue,value]);var onSave=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var collectionRef;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:collectionRef=firebase.firestore().collextion(\"items\");if(!initialValue){_context.next=6;break;}_context.next=4;return collectionRef.doc(initialValue).set({name:item,createdOn:new Date.getTime()});case 4:setItem(\"\");clear();case 6:case\"end\":return _context.stop();}}},_callee);}));return function onSave(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(IonItem,{children:/*#__PURE__*/_jsx(IonInput,{value:item,onInput:function onInput(e){return setItem(e.target.value);}})}),/*#__PURE__*/_jsx(IonButton,{style:{marginTop:8},onClick:onSave,children:\"Save\"}),/*#__PURE__*/_jsx(IonButton,{style:{marginTop:8},onClick:function onClick(){setItem(\"\");clear();},children:\"Clear\"})]});}","map":{"version":3,"sources":["C:/Users/romai/Documents/Cours/IHM/Projet_M2/InstaSound/InstaSound/src/AddItem.js"],"names":["React","useState","useEffect","Item","firebase","useDocument","IonList","IonItem","IonLabel","IonText","IonItemSliding","IonItemOption","IonItemOptions","IonIcon","IonButton","IonInput","AddItem","initialValue","clear","item","setItem","firestore","doc","snapshotListenOptions","includeMetadataChanges","value","loading","error","exists","data","name","onSave","collectionRef","collextion","set","createdOn","Date","getTime","e","target","marginTop"],"mappings":"qrBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA0C,OAA1C,CACA,MAAOC,CAAAA,IAAP,KAAiB,QAAjB,CACA,MAAOC,CAAAA,QAAP,KAAqB,UAArB,CACA,OAAQC,WAAR,KAA0B,gCAA1B,CACA,OAAQC,OAAR,CAAiBC,OAAjB,CAA0BC,QAA1B,CAAoCC,OAApC,CAA6CC,cAA7C,CAA6DC,aAA7D,CAA4EC,cAA5E,CAA4FC,OAA5F,CAAqGC,SAArG,CAAgHC,QAAhH,KAA+H,cAA/H,CAEA,cAAe,SAASC,CAAAA,OAAT,MAAwC,IAAtBC,CAAAA,YAAsB,MAAtBA,YAAsB,CAARC,KAAQ,MAARA,KAAQ,eAC3BjB,QAAQ,CAAC,EAAD,CADmB,wCAC5CkB,IAD4C,eACtCC,OADsC,gCAEnBf,WAAW,CACvCD,QAAQ,CAACiB,SAAT,GAAqBC,GAArB,CAAyB,QAAUL,YAAnC,CADuC,CAEvC,CACIM,qBAAqB,CAAE,CAACC,sBAAsB,CAAE,IAAzB,CAD3B,CAFuC,CAFQ,8CAE5CC,KAF4C,kBAErCC,OAFqC,kBAE5BC,KAF4B,kBASnDzB,SAAS,CAAC,UAAM,CACZ,CAACwB,OAAD,EAAYT,YAAZ,EAA4BQ,KAAK,CAACG,MAAlC,EAA4CR,OAAO,CAACK,KAAK,CAACI,IAAN,GAAaC,IAAd,CAAnD,CACH,CAFQ,CAGT,CAACJ,OAAD,CAAUT,YAAV,CAAwBQ,KAAxB,CAHS,CAAT,CAKA,GAAMM,CAAAA,MAAM,2FAAG,qJACPC,aADO,CACS5B,QAAQ,CAACiB,SAAT,GAAqBY,UAArB,CAAgC,OAAhC,CADT,KAERhB,YAFQ,+CAGAe,CAAAA,aAAD,CAAgBV,GAAhB,CAAoBL,YAApB,EAAkCiB,GAAlC,CACF,CAACJ,IAAI,CAAEX,IAAP,CAAagB,SAAS,CAAE,GAAIC,CAAAA,IAAI,CAACC,OAAT,EAAxB,CADE,CAHC,QAKHjB,OAAO,CAAC,EAAD,CAAP,CACAF,KAAK,GANF,sDAAH,kBAANa,CAAAA,MAAM,2CAAZ,CASA,mBACI,wCACI,KAAC,OAAD,wBACI,KAAC,QAAD,EAAU,KAAK,CAAEZ,IAAjB,CAAuB,OAAO,CAAE,iBAAAmB,CAAC,QAAIlB,CAAAA,OAAO,CAACkB,CAAC,CAACC,MAAF,CAASd,KAAV,CAAX,EAAjC,EADJ,EADJ,cAII,KAAC,SAAD,EAAW,KAAK,CAAE,CAACe,SAAS,CAAC,CAAX,CAAlB,CAAiC,OAAO,CAAET,MAA1C,kBAJJ,cAOI,KAAC,SAAD,EAAW,KAAK,CAAE,CAACS,SAAS,CAAC,CAAX,CAAlB,CAAiC,OAAO,CAAE,kBAAI,CAC1CpB,OAAO,CAAC,EAAD,CAAP,CACAF,KAAK,GACR,CAHD,mBAPJ,GADJ,CAgBH","sourcesContent":["import React, { useState, useEffect} from 'react';\r\nimport Item from \"./Item\"\r\nimport firebase from 'firebase';\r\nimport {useDocument} from \"react-firebase-hooks/firestore\";\r\nimport {IonList, IonItem, IonLabel, IonText, IonItemSliding, IonItemOption, IonItemOptions, IonIcon, IonButton, IonInput} from '@ionic/react';\r\n\r\nexport default function AddItem({initialValue, clear}) {\r\n    const [item, setItem] = useState(\"\");\r\n    const [value, loading, error] = useDocument(\r\n        firebase.firestore().doc(\"items\" + initialValue),\r\n        {\r\n            snapshotListenOptions: {includeMetadataChanges: true}\r\n        }\r\n    );\r\n\r\n    useEffect(() => {\r\n        !loading && initialValue && value.exists && setItem(value.data().name);\r\n    },\r\n    [loading, initialValue, value]);\r\n\r\n    const onSave = async() => {\r\n        let collectionRef = firebase.firestore().collextion(\"items\");\r\n        if(initialValue) {\r\n            await (collectionRef).doc(initialValue).set(\r\n                {name: item, createdOn: new Date.getTime() });\r\n                setItem(\"\");\r\n                clear();\r\n        }\r\n    };\r\n    return (\r\n        <>\r\n            <IonItem>\r\n                <IonInput value={item} onInput={e => setItem(e.target.value)}/>\r\n            </IonItem>\r\n            <IonButton style={{marginTop:8}} onClick={onSave}>\r\n                Save\r\n            </IonButton>\r\n            <IonButton style={{marginTop:8}} onClick={()=>{\r\n                setItem(\"\");\r\n                clear();\r\n            }}>\r\n                Clear\r\n            </IonButton>\r\n        </>\r\n    );\r\n}"]},"metadata":{},"sourceType":"module"}